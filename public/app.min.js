(function () {
    'use strict';

    var app = angular.module('app', [
        // Predefined modules.
        'ui.bootstrap',
        'ui.router',
        'ngResource',
        'ngRoute',

        // App components.
        'app.home',
        'app.admin',
        'app.profile',
        'app.signUp',

        // App shared.
        'app.providers',
        'app.services',
        'app.resources'
    ]);
})();
(function () {
    'use strict';

    angular.module('app.admin', [

    ]);

})();
(function () {
    'use strict';

    angular.module('app.home', [

    ]);

})();
(function () {
    'use strict';

    angular.module('app.signUp', [

    ]);

})();
(function () {
    'use strict';

    angular.module('app.profile', [

    ]);

})();
(function () {
    'use strict';

    angular.module('app.providers', []);

})();
(function () {
    'use strict';

    angular.module('app.resources', []);

})();
(function () {
    'use strict';

    angular.module('app.services', []);

})();
(function () {
    'use strict';

    var app = angular.module('app');

    app.config(Configuration);

    Configuration.$inject = ['$logProvider', '$stateProvider', '$urlRouterProvider', '$locationProvider'];

    function Configuration($logProvider, $stateProvider, $urlRouterProvider, $locationProvider) {
        // Logging.
        $logProvider.debugEnabled(true);

        // HTML5 mode.
        $locationProvider.html5Mode({
            enabled: true,
            requireBase: false
        });

        // Always default to home page.
        $urlRouterProvider.otherwise('/app/home');

        // Routes.
        var defaultCtrlAs = 'vm';
        var mainViewsObj = {
            nav: {
                templateUrl: '/partials/layout/navTmpl',
                controller: 'NavCtrl',
                controllerAs: defaultCtrlAs
            },
            '': {
                templateUrl: '/partials/layout/contentTmpl',
                controller: 'ContentCtrl',
                controllerAs: defaultCtrlAs
            },
            sidebar: {
                templateUrl: '/partials/layout/sidebarTmpl',
                controller: 'SidebarCtrl',
                controllerAs: defaultCtrlAs
            },
            footer: {
                templateUrl: '/partials/layout/footerTmpl',
                controller: 'FooterCtrl',
                controllerAs: defaultCtrlAs
            }
        };

        $stateProvider
            .state('app', {
                abstract: true,
                url: '/app',
                views: mainViewsObj
            });
    }

    // Add extra properties to each state.
    app.run(['$rootScope', function ($rootScope) {
        $rootScope.$on('$stateChangeSuccess', function (event, current) {
            $rootScope.title = current.title;
            $rootScope.bodyCss = current.bodyCss;
        });
    }]);

})();
(function () {
    'use strict';

    var appAdmin = angular.module('app.admin');

    //=========================================================================
    // Config.
    //=========================================================================
    appAdmin.config(Configuration);

    Configuration.$inject = ['$stateProvider'];

    function Configuration($stateProvider) {
        var routeRoleChecks = {
            admin: {
                auth: function (authService) {
                    return authService.authorizeCurrentUserForRoute('admin');
                }
            }
        };

        $stateProvider
            .state('app.userList', {
                url: '/user-list',
                templateUrl: '/partials/components/admin/userListView',
                controller: 'UserListCtrl',
                controllerAs: 'vm',
                resolve: routeRoleChecks.admin,
                title: 'User List',
                bodyCss: 'user-list'
            });
    }

    //=========================================================================
    // Run.
    //=========================================================================
    appAdmin.run(Run);

    Run.$inject = ['$rootScope', '$state'];

    function Run($rootScope, $state) {
        $rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {
            if (error.notAuthorized) {
                $state.go('app.home');
            }
        });
    }
})();
(function () {
    'use strict';

    angular.module('app.home').config(Configuration);

    Configuration.$inject = ['$stateProvider'];

    function Configuration($stateProvider) {
        $stateProvider
            .state('app.home', {
                url: '/home',
                templateUrl: '/partials/components/home/homeView',
                controller: 'HomeCtrl',
                controllerAs: 'vm',
                title: 'Home',
                bodyCss: 'home'
            });
    }

})();
(function () {
    'use strict';

    var appSignUp = angular.module('app.signUp');

    //=========================================================================
    // Config.
    //=========================================================================
    appSignUp.config(Configuration);

    Configuration.$inject = ['$stateProvider'];

    function Configuration($stateProvider) {
        $stateProvider
            .state('app.signUp', {
                url: '/sign-up',
                templateUrl: '/partials/components/signUp/signUpView',
                controller: 'SignUpCtrl',
                controllerAs: 'vm',
                title: 'Sign Up',
                bodyCss: 'sign-up'
            });
    }

})();
(function () {
    'use strict';

    angular.module('app.profile').config(Configuration);

    Configuration.$inject = ['$stateProvider'];

    function Configuration($stateProvider) {
        var routeRoleChecks = {
            user: {
                auth: function (authService) {
                    return authService.authorizeAuthenticatedUserForRoute();
                }
            }
        };

        $stateProvider
            .state('app.profile', {
                url: '/profile',
                templateUrl: '/partials/components/profile/profileView',
                controller: 'ProfileCtrl',
                controllerAs: 'vm',
                resolve: routeRoleChecks.user,
                title: 'Profile',
                bodyCss: 'profile'
            });
    }

})();
(function () {
    'use strict';

    angular.module('app.providers').config(Configuration);

    Configuration.$inject = [];

    function Configuration() {

    }

})();
(function () {
    'use strict';

    angular.module('app.resources').config(Configuration);

    Configuration.$inject = [];

    function Configuration() {

    }

})();
(function () {
    'use strict';

    angular.module('app.services').config(Configuration);

    Configuration.$inject = [];

    function Configuration() {

    }

})();
(function () {
    'use strict';

    angular.module('app').controller('ContentCtrl', ContentCtrl);

    ContentCtrl.$inject = ['logger'];

    function ContentCtrl(logger) {
        var vm = this;

        init();

        function init() {
            logger.debug(ContentCtrl, init, 'Initializing...');
        }

    }
})();
(function () {
    'use strict';

    angular.module('app').controller('FooterCtrl', FooterCtrl);

    FooterCtrl.$inject = ['logger'];

    function FooterCtrl(logger) {
        var vm = this;

        init();

        function init() {
            logger.debug(FooterCtrl, init, 'Initializing...');
        }

    }
})();
(function () {
    'use strict';

    angular.module('app').controller('NavCtrl', NavCtrl);

    NavCtrl.$inject = ['logger', '$http', '$state', 'notificationProvider', 'identityService', 'authService'];

    function NavCtrl(logger, $http, $state, notificationProvider, identityService, authService) {
        var vm = this;

        //=====================================================================
        // Expose functions.
        //=====================================================================
        vm.logIn = logIn;
        vm.logOut = logOut;

        //=====================================================================
        // Initialization.
        //=====================================================================
        init();

        function init() {
            logger.debug(NavCtrl, init, 'Initializing...');
            vm.identity = identityService;
        }

        //=====================================================================
        // Exposed functions implementation.
        //=====================================================================
        function logIn() {
            logger.debug(NavCtrl, logIn, 'Signing in...');

            authService.authenticateUser(vm.username, vm.password)
                .then(function (success) {
                    if (success) {
                        notificationProvider.success('You have successfully logged in.');
                    } else {
                        notificationProvider.error('Invalid user name or password!');
                    }
                });
        }

        function logOut() {
            logger.debug(NavCtrl, logOut, 'Signing in...');

            authService.logOutUser()
                .then(function () {
                    vm.username = '';
                    vm.password = '';
                    notificationProvider.info('You have been logged out.');
                    $state.go('app.home');
                });
        }

    }
})();
(function () {
    'use strict';

    angular.module('app').controller('SidebarCtrl', SidebarCtrl);

    SidebarCtrl.$inject = ['logger'];

    function SidebarCtrl(logger) {
        var vm = this;

        init();

        function init() {
            logger.debug(SidebarCtrl, init, 'Initializing...');
            vm.test = 'Test Recipe';
        }

    }
})();
(function () {
    'use strict';

    angular.module('app.admin').controller('UserListCtrl', UserListCtrl);

    UserListCtrl.$inject = ['$scope', 'logger', 'UserResource'];

    function UserListCtrl($scope, logger, UserResource) {
        var vm = this;

        init();

        function init() {
            logger.debug(UserListCtrl, init, 'Initializing...');
            vm.users = UserResource.query();
        }
    }
})();
(function () {
    'use strict';

    angular.module('app.home').controller('HomeCtrl', HomeCtrl);

    HomeCtrl.$inject = ['$scope', 'logger'];

    function HomeCtrl($scope, logger) {
        var vm = this;

        init();

        function init() {
            logger.debug(HomeCtrl, init, 'Initializing...');
        }
    }
})();
(function () {
    'use strict';

    angular.module('app.signUp').controller('SignUpCtrl', SignUpCtrl);

    SignUpCtrl.$inject = ['$scope', '$state', 'logger', 'notificationProvider', 'validation', 'authService'];

    function SignUpCtrl($scope, $state, logger, notificationProvider, validation, authService) {
        var vm = this;

        //=====================================================================
        // Exposed functions.
        //=====================================================================
        vm.getClass = validation.getClass;
        vm.signUp = signUp;

        //=====================================================================
        // Initialization.
        //=====================================================================
        init();

        function init() {
            logger.debug(SignUpCtrl, init, 'Initializing...');
        }

        //=====================================================================
        // Exposed functions implementation.
        //=====================================================================
        function signUp() {
            logger.debug(SignUpCtrl, signUp, 'Submitting form...');
            vm.isLoading = true;

            var newUserData = {
                username: vm.email,
                password: vm.password,
                firstName: vm.firstName,
                lastName: vm.lastName
            };

            authService.createUser(newUserData)
                .then(function () {
                    notificationProvider.success('User successfully created.');
                    $state.go('app.home');
                })
                .catch(function (errorResponse) {
                    notificationProvider.error(errorResponse);
                })
                .finally(function () {
                    vm.isLoading = false;
                });
        }
    }
})();
(function () {
    'use strict';

    angular.module('app.profile').controller('ProfileCtrl', ProfileCtrl);

    ProfileCtrl.$inject = ['$scope', 'logger', 'validation', 'authService', 'identityService', 'notificationProvider'];

    function ProfileCtrl($scope, logger, validation, authService, identityService, notificationProvider) {
        var vm = this;

        //=====================================================================
        // Exposed functions.
        //=====================================================================
        vm.getClass = validation.getClass;
        vm.update = update;

        //=====================================================================
        // Initialization.
        //=====================================================================
        init();

        function init() {
            logger.debug(ProfileCtrl, init, 'Initializing...');

            // Update view.
            vm.email = identityService.currentUser.username;
            vm.firstName = identityService.currentUser.firstName;
            vm.lastName = identityService.currentUser.lastName;
        }

        //=====================================================================
        // Exposed functions implementation.
        //=====================================================================
        function update() {
            logger.debug(ProfileCtrl, update, 'Updating user profile...');
            vm.isLoading = true;

            var newUserData = {
                username: vm.email,
                firstName: vm.firstName,
                lastName: vm.lastName
            };

            if (vm.password && vm.password.length > 0) {
                newUserData.password = vm.password;
            }

            authService.updateCurrentUser(newUserData)
                .then(function () {
                    notificationProvider.success('Your user profile has been updated.');
                })
                .catch(function (reason) {
                    notificationProvider.error(reason);
                })
                .finally(function () {
                    vm.isLoading = false;
                });
        }
    }
})();
(function () {
    'use strict';

    angular.module('app.providers').factory('logger', Logger);

    Logger.$inject = ['$log'];

    function Logger($log) {
        //=====================================================================
        // Exposed functions.
        //=====================================================================
        function debug(ctrl, func, msg) {
            $log.debug(buildMsg(ctrl, func, msg));
        }

        function error(ctrl, func, msg) {
            $log.error(buildMsg(ctrl, func, msg));
        }

        function info(ctrl, func, msg) {
            $log.info(buildMsg(ctrl, func, msg));
        }

        function log(ctrl, func, msg) {
            $log.log(buildMsg(ctrl, func, msg));
        }

        function warn(ctrl, func, msg) {
            $log.warn(buildMsg(ctrl, func, msg));
        }

        //=====================================================================
        // Helper functions.
        //=====================================================================
        function buildMsg(ctrl, func, msg) {
            return ctrl.name + ' -> ' + func.name + '(): ' + msg;
        }

        //=====================================================================
        // Expose functions.
        //=====================================================================
        return {
            debug: debug,
            error: error,
            info: info,
            log: log,
            warn: warn
        };
    }

})();

(function () {
    'use strict';

    angular.module('app.providers').value('toastr', toastr);
    angular.module('app.providers').factory('notificationProvider', NotificationProvider);

    NotificationProvider.$inject = ['toastr', 'logger'];

    function NotificationProvider(toastr, logger) {
        //=====================================================================
        // Toastr options.
        //=====================================================================
        toastr.options = {
            closeButton: false,
            debug: false,
            newestOnTop: false,
            progressBar: false,
            positionClass: 'toast-top-center',
            preventDuplicates: false,
            onclick: null,
            showDuration: 500,
            hideDuration: 1000,
            timeOut: 2000,
            extendedTimeOut: 1000,
            showEasing: 'swing',
            hideEasing: 'linear',
            showMethod: 'fadeIn',
            hideMethod: 'fadeOut'
        };

        //=====================================================================
        // Public functions.
        //=====================================================================
        function success(msg) {
            toastr.success(msg);
            logger.debug(NotificationProvider, success, msg);
        }

        function info(msg) {
            toastr.info(msg);
            logger.debug(NotificationProvider, info, msg);
        }

        function warning(msg) {
            toastr.warning(msg);
            logger.debug(NotificationProvider, warning, msg);
        }

        function error(msg) {
            toastr.error(msg);
            logger.debug(NotificationProvider, error, msg);
        }

        //=====================================================================
        // Expose functions.
        //=====================================================================
        return {
            success: success,
            info: info,
            warning: warning,
            error: error
        };
    }

})();
(function () {
    'use strict';

    angular.module('app.providers').factory('validation', Validation);

    Validation.$inject = [];

    function Validation() {
        //=====================================================================
        // Exposed functions.
        //=====================================================================
        function hasError(form, formElement) {
            return form.$submitted && formElement.$invalid;
        }

        function hasWarn(form, formElement) {
            return !form.$submitted && formElement.$dirty && formElement.$invalid;
        }

        function hasSuccess(formElement) {
            return formElement.$dirty && !formElement.$invalid;
        }

        function getClass(form, formElement) {
            return {
                'has-error': hasError(form, formElement),
                'has-warning': hasWarn(form, formElement),
                'has-success': hasSuccess(formElement)
            };
        }

        //=====================================================================
        // Expose functions.
        //=====================================================================
        return {
            hasError: hasError,
            hasWarn: hasWarn,
            hasSuccess: hasSuccess,
            getClass: getClass
        };
    }

})();
(function () {
    'use strict';

    angular.module('app.resources').factory('UserResource', UserResource);

    UserResource.$inject = ['$resource'];

    function UserResource($resource) {
        //=====================================================================
        // Resource.
        //=====================================================================
        var UserRes = $resource('/api/users/:id', {_id: '@id'}, {
            update: { method: 'PUT', isArray: false }
        });

        UserRes.prototype.isAdmin = function () {
            return this.roles && this.roles.indexOf('admin') >= 0;
        };

        return UserRes;
    }

})();
(function () {
    'use strict';

    angular.module('app.services').factory('authService', AuthService);

    AuthService.$inject = ['$http', '$q', 'logger', 'identityService', 'UserResource'];

    function AuthService($http, $q, logger, identityService, UserResource) {
        //=====================================================================
        // Variables.
        //=====================================================================
        var notAuthorizedObj = { notAuthorized: true };

        //=====================================================================
        // Public functions.
        //=====================================================================
        function authenticateUser(username, password) {
            var deferred = $q.defer();

            $http.post('/login', {
                username: username,
                password: password
            }).then(function (response) {
                if (response.data.success) {
                    var user = new UserResource();
                    angular.extend(user, response.data.user);

                    // Save current user.
                    identityService.currentUser = user;

                    deferred.resolve(true);
                } else {
                    deferred.resolve(false);
                }
            });

            return deferred.promise;
        }

        function logOutUser() {
            var deferred = $q.defer();

            $http.post('/logout', { logOut: true })
                .then(function () {
                    identityService.currentUser = null;
                    deferred.resolve();
                });

            return deferred.promise;
        }

        function createUser(newUserData) {
            var deferred = $q.defer();
            var newUser = new UserResource(newUserData);

            newUser.$save()
                .then(function () {
                    identityService.currentUser = newUser;
                    deferred.resolve();
                })
                .catch(function (errorResponse) {
                    deferred.reject(errorResponse.data.reason);
                });

            return deferred.promise;
        }

        function updateCurrentUser(newUserData) {
            var deferred = $q.defer();

            var clone = angular.copy(identityService.currentUser);
            angular.extend(clone, newUserData);

            clone.$update()
                .then(function () {
                    identityService.currentUser = clone;
                    deferred.resolve();
                })
                .catch(function (errorResponse) {
                    deferred.reject(errorResponse.data.reason);
                });

            return deferred.promise;
        }

        function authorizeCurrentUserForRoute(role) {
            if (identityService.isAuthorized(role)) {
                return true;
            } else {
                return $q.reject(notAuthorizedObj);
            }
        }

        function authorizeAuthenticatedUserForRoute() {
            if (identityService.isAuthenticated()) {
                return true;
            } else {
                return $q.reject(notAuthorizedObj);
            }
        }

        //=====================================================================
        // Expose functions.
        //=====================================================================
        return {
            authenticateUser: authenticateUser,
            logOutUser: logOutUser,
            createUser: createUser,
            updateCurrentUser: updateCurrentUser,
            authorizeCurrentUserForRoute: authorizeCurrentUserForRoute,
            authorizeAuthenticatedUserForRoute: authorizeAuthenticatedUserForRoute
        };
    }

})();
(function () {
    'use strict';

    angular.module('app.services').factory('identityService', IdentityService);

    IdentityService.$inject = ['$window', 'logger', 'UserResource'];

    function IdentityService($window, logger, UserResource) {
        //=====================================================================
        // Handle bootstrapped current user object.
        //=====================================================================
        var currentUser = null;

        if (!!$window.bootstrappedUserObject) {
            currentUser = new UserResource();
            angular.extend(currentUser, $window.bootstrappedUserObject);
        }

        //=====================================================================
        // Public functions.
        //=====================================================================
        function isAuthenticated() {
            return !!this.currentUser;
        }

        function isAuthorized(role) {
            return !!this.currentUser && this.currentUser.roles.indexOf(role) >= 0;
        }

        //=====================================================================
        // Expose functions.
        //=====================================================================
        return {
            currentUser: currentUser,
            isAuthenticated: isAuthenticated,
            isAuthorized: isAuthorized
        };
    }

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb21wb25lbnRzL2FkbWluL2FwcC5hZG1pbi5tb2R1bGUuanMiLCJjb21wb25lbnRzL2hvbWUvYXBwLmhvbWUubW9kdWxlLmpzIiwiY29tcG9uZW50cy9zaWduVXAvYXBwLnNpZ25VcC5tb2R1bGUuanMiLCJjb21wb25lbnRzL3Byb2ZpbGUvYXBwLnByb2ZpbGUubW9kdWxlLmpzIiwic2hhcmVkL3Byb3ZpZGVycy9hcHAucHJvdmlkZXJzLm1vZHVsZS5qcyIsInNoYXJlZC9yZXNvdXJjZXMvYXBwLnJlc291cmNlcy5tb2R1bGUuanMiLCJzaGFyZWQvc2VydmljZXMvYXBwLnNlcnZpY2VzLm1vZHVsZS5qcyIsImFwcC5jb25maWcuanMiLCJjb21wb25lbnRzL2FkbWluL2FwcC5hZG1pbi5jb25maWcuanMiLCJjb21wb25lbnRzL2hvbWUvYXBwLmhvbWUuY29uZmlnLmpzIiwiY29tcG9uZW50cy9zaWduVXAvYXBwLnNpZ25VcC5jb25maWcuanMiLCJjb21wb25lbnRzL3Byb2ZpbGUvYXBwLnByb2ZpbGUuY29uZmlnLmpzIiwic2hhcmVkL3Byb3ZpZGVycy9hcHAucHJvdmlkZXJzLmNvbmZpZy5qcyIsInNoYXJlZC9yZXNvdXJjZXMvYXBwLnJlc291cmNlcy5jb25maWcuanMiLCJzaGFyZWQvc2VydmljZXMvYXBwLnNlcnZpY2VzLmNvbmZpZy5qcyIsImxheW91dC9jb250ZW50Q3RybC5qcyIsImxheW91dC9mb290ZXJDdHJsLmpzIiwibGF5b3V0L25hdkN0cmwuanMiLCJsYXlvdXQvc2lkZWJhckN0cmwuanMiLCJjb21wb25lbnRzL2FkbWluL3VzZXJMaXN0Q3RybC5qcyIsImNvbXBvbmVudHMvaG9tZS9ob21lQ3RybC5qcyIsImNvbXBvbmVudHMvc2lnblVwL3NpZ25VcEN0cmwuanMiLCJjb21wb25lbnRzL3Byb2ZpbGUvcHJvZmlsZUN0cmwuanMiLCJzaGFyZWQvcHJvdmlkZXJzL2xvZ2dlci5qcyIsInNoYXJlZC9wcm92aWRlcnMvbm90aWZpY2F0aW9uUHJvdmlkZXIuanMiLCJzaGFyZWQvcHJvdmlkZXJzL3ZhbGlkYXRpb24uanMiLCJzaGFyZWQvcmVzb3VyY2VzL3VzZXJSZXNvdXJjZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9hdXRoU2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9pZGVudGl0eVNlcnZpY2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsSUFBQSxNQUFBLFFBQUEsT0FBQSxPQUFBOztRQUVBO1FBQ0E7UUFDQTtRQUNBOzs7UUFHQTtRQUNBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTtRQUNBOzs7QUNuQkEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGFBQUE7Ozs7O0FDSEEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLFlBQUE7Ozs7O0FDSEEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGNBQUE7Ozs7O0FDSEEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGVBQUE7Ozs7O0FDSEEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGlCQUFBOzs7QUNIQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsaUJBQUE7OztBQ0hBLENBQUEsWUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxnQkFBQTs7O0FDSEEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsSUFBQSxNQUFBLFFBQUEsT0FBQTs7SUFFQSxJQUFBLE9BQUE7O0lBRUEsY0FBQSxVQUFBLENBQUEsZ0JBQUEsa0JBQUEsc0JBQUE7O0lBRUEsU0FBQSxjQUFBLGNBQUEsZ0JBQUEsb0JBQUEsbUJBQUE7O1FBRUEsYUFBQSxhQUFBOzs7UUFHQSxrQkFBQSxVQUFBO1lBQ0EsU0FBQTtZQUNBLGFBQUE7Ozs7UUFJQSxtQkFBQSxVQUFBOzs7UUFHQSxJQUFBLGdCQUFBO1FBQ0EsSUFBQSxlQUFBO1lBQ0EsS0FBQTtnQkFDQSxhQUFBO2dCQUNBLFlBQUE7Z0JBQ0EsY0FBQTs7WUFFQSxJQUFBO2dCQUNBLGFBQUE7Z0JBQ0EsWUFBQTtnQkFDQSxjQUFBOztZQUVBLFNBQUE7Z0JBQ0EsYUFBQTtnQkFDQSxZQUFBO2dCQUNBLGNBQUE7O1lBRUEsUUFBQTtnQkFDQSxhQUFBO2dCQUNBLFlBQUE7Z0JBQ0EsY0FBQTs7OztRQUlBO2FBQ0EsTUFBQSxPQUFBO2dCQUNBLFVBQUE7Z0JBQ0EsS0FBQTtnQkFDQSxPQUFBOzs7OztJQUtBLElBQUEsSUFBQSxDQUFBLGNBQUEsVUFBQSxZQUFBO1FBQ0EsV0FBQSxJQUFBLHVCQUFBLFVBQUEsT0FBQSxTQUFBO1lBQ0EsV0FBQSxRQUFBLFFBQUE7WUFDQSxXQUFBLFVBQUEsUUFBQTs7Ozs7QUMzREEsQ0FBQSxZQUFBO0lBQ0E7O0lBRUEsSUFBQSxXQUFBLFFBQUEsT0FBQTs7Ozs7SUFLQSxTQUFBLE9BQUE7O0lBRUEsY0FBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxjQUFBLGdCQUFBO1FBQ0EsSUFBQSxrQkFBQTtZQUNBLE9BQUE7Z0JBQ0EsTUFBQSxVQUFBLGFBQUE7b0JBQ0EsT0FBQSxZQUFBLDZCQUFBOzs7OztRQUtBO2FBQ0EsTUFBQSxnQkFBQTtnQkFDQSxLQUFBO2dCQUNBLGFBQUE7Z0JBQ0EsWUFBQTtnQkFDQSxjQUFBO2dCQUNBLFNBQUEsZ0JBQUE7Z0JBQ0EsT0FBQTtnQkFDQSxTQUFBOzs7Ozs7O0lBT0EsU0FBQSxJQUFBOztJQUVBLElBQUEsVUFBQSxDQUFBLGNBQUE7O0lBRUEsU0FBQSxJQUFBLFlBQUEsUUFBQTtRQUNBLFdBQUEsSUFBQSxxQkFBQSxVQUFBLE9BQUEsU0FBQSxVQUFBLFdBQUEsWUFBQSxPQUFBO1lBQ0EsSUFBQSxNQUFBLGVBQUE7Z0JBQ0EsT0FBQSxHQUFBOzs7OztBQzNDQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsWUFBQSxPQUFBOztJQUVBLGNBQUEsVUFBQSxDQUFBOztJQUVBLFNBQUEsY0FBQSxnQkFBQTtRQUNBO2FBQ0EsTUFBQSxZQUFBO2dCQUNBLEtBQUE7Z0JBQ0EsYUFBQTtnQkFDQSxZQUFBO2dCQUNBLGNBQUE7Z0JBQ0EsT0FBQTtnQkFDQSxTQUFBOzs7OztBQ2ZBLENBQUEsWUFBQTtJQUNBOztJQUVBLElBQUEsWUFBQSxRQUFBLE9BQUE7Ozs7O0lBS0EsVUFBQSxPQUFBOztJQUVBLGNBQUEsVUFBQSxDQUFBOztJQUVBLFNBQUEsY0FBQSxnQkFBQTtRQUNBO2FBQ0EsTUFBQSxjQUFBO2dCQUNBLEtBQUE7Z0JBQ0EsYUFBQTtnQkFDQSxZQUFBO2dCQUNBLGNBQUE7Z0JBQ0EsT0FBQTtnQkFDQSxTQUFBOzs7OztBQ3BCQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsZUFBQSxPQUFBOztJQUVBLGNBQUEsVUFBQSxDQUFBOztJQUVBLFNBQUEsY0FBQSxnQkFBQTtRQUNBLElBQUEsa0JBQUE7WUFDQSxNQUFBO2dCQUNBLE1BQUEsVUFBQSxhQUFBO29CQUNBLE9BQUEsWUFBQTs7Ozs7UUFLQTthQUNBLE1BQUEsZUFBQTtnQkFDQSxLQUFBO2dCQUNBLGFBQUE7Z0JBQ0EsWUFBQTtnQkFDQSxjQUFBO2dCQUNBLFNBQUEsZ0JBQUE7Z0JBQ0EsT0FBQTtnQkFDQSxTQUFBOzs7OztBQ3hCQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsaUJBQUEsT0FBQTs7SUFFQSxjQUFBLFVBQUE7O0lBRUEsU0FBQSxnQkFBQTs7Ozs7QUNQQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsaUJBQUEsT0FBQTs7SUFFQSxjQUFBLFVBQUE7O0lBRUEsU0FBQSxnQkFBQTs7Ozs7QUNQQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsZ0JBQUEsT0FBQTs7SUFFQSxjQUFBLFVBQUE7O0lBRUEsU0FBQSxnQkFBQTs7Ozs7QUNQQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsT0FBQSxXQUFBLGVBQUE7O0lBRUEsWUFBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxZQUFBLFFBQUE7UUFDQSxJQUFBLEtBQUE7O1FBRUE7O1FBRUEsU0FBQSxPQUFBO1lBQ0EsT0FB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LEtBQUE7WUFDQSxLQUFBLEtBQUEsU0FBQSxNQUFBLE1BQUE7OztRQUdBLFNBQUEsSUFBQSxNQUFBLE1BQUEsS0FBQTtZQUNBLEtBQUEsSUFBQSxTQUFBLE1BQUEsTUFBQTs7O1FBR0EsU0FBQSxLQUFBLE1BQUEsTUFBQSxLQUFBO1lBQ0EsS0FBQSxLQUFBLFNBQUEsTUFBQSxNQUFBOzs7Ozs7UUFNQSxTQUFBLFNBQUEsTUFBQSxNQUFBLEtBQUE7WUFDQSxPQUFBLEtBQUEsT0FBQSxTQUFBLEtBQUEsT0FBQSxTQUFBOzs7Ozs7UUFNQSxPQUFBO1lBQ0EsT0FBQTtZQUNBLE9BQUE7WUFDQSxNQUFBO1lBQ0EsS0FBQTtZQUNBLE1BQUE7Ozs7OztBQzdDQSxDQUFBLFlBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsaUJBQUEsTUFBQSxVQUFBO0lBQ0EsUUFBQSxPQUFBLGlCQUFBLFFBQUEsd0JBQUE7O0lBRUEscUJBQUEsVUFBQSxDQUFBLFVBQUE7O0lBRUEsU0FBQSxxQkFBQSxRQUFBLFFBQUE7Ozs7UUFJQSxPQUFBLFVBQUE7WUFDQSxhQUFBO1lBQ0EsT0FBQTtZQUNBLGFBQUE7WUFDQSxhQUFBO1lBQ0EsZUFBQTtZQUNBLG1CQUFBO1lBQ0EsU0FBQTtZQUNBLGNBQUE7WUFDQSxjQUFBO1lBQ0EsU0FBQTtZQUNBLGlCQUFBO1lBQ0EsWUFBQTtZQUNBLFlBQUE7WUFDQSxZQUFBO1lBQ0EsWUFBQTs7Ozs7O1FBTUEsU0FBQSxRQUFBLEtBQUE7WUFDQSxPQUFBLFFBQUE7WUFDQSxPQUFBLE1BQUEsc0JBQUEsU0FBQTs7O1FBR0EsU0FBQSxLQUFBLEtBQUE7WUFDQSxPQUFBLEtBQUE7WUFDQSxPQUFBLE1BQUEsc0JBQUEsTUFBQTs7O1FBR0EsU0FBQSxRQUFBLEtBQUE7WUFDQSxPQUFBLFFBQUE7WUFDQSxPQUFBLE1BQUEsc0JBQUEsU0FBQTs7O1FBR0EsU0FBQSxNQUFBLEtBQUE7WUFDQSxPQUFBLE1BQUE7WUFDQSxPQUFBLE1BQUEsc0JBQUEsT0FBQTs7Ozs7O1FBTUEsT0FBQTtZQUNBLFNBQUE7WUFDQSxN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O2dCQUNBLE9BQUEsR0FBQSxPQUFBOzs7Ozs7O1FBT0EsT0FBQTtZQUNBLGtCQUFBO1lBQ0EsWUFBQTtZQUNBLFlBQUE7WUFDQSxtQkFBQTtZQUNBLDhCQUFBO1lBQ0Esb0NBQUE7Ozs7O0FDOUdBLENBQUEsWUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLG1CQUFBOztJQUVBLGdCQUFBLFVBQUEsQ0FBQSxXQUFBLFVBQUE7O0lBRUEsU0FBQSxnQkFBQSxTQUFBLFFBQUEsY0FBQTs7OztRQUlBLElBQUEsY0FBQTs7UUFFQSxJQUFBLENBQUEsQ0FBQSxRQUFBLHdCQUFBO1lBQ0EsY0FBQSxJQUFBO1lBQ0EsUUFBQSxPQUFBLGFBQUEsUUFBQTs7Ozs7O1FBTUEsU0FBQSxrQkFBQTtZQUNBLE9BQUEsQ0FBQSxDQUFBLEtBQUE7OztRQUdBLFNBQUEsYUFBQSxNQUFBO1lBQ0EsT0FBQSxDQUFBLENBQUEsS0FBQSxlQUFBLEtBQUEsWUFBQSxNQUFBLFFBQUEsU0FBQTs7Ozs7O1FBTUEsT0FBQTtZQUNBLGFBQUE7WUFDQSxpQkFBQTtZQUNBLGNBQUE7Ozs7S0FJQSIsImZpbGUiOiJwdWJsaWMvYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICAgICAgIC8vIFByZWRlZmluZWQgbW9kdWxlcy5cbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgICAgICd1aS5yb3V0ZXInLFxuICAgICAgICAnbmdSZXNvdXJjZScsXG4gICAgICAgICduZ1JvdXRlJyxcblxuICAgICAgICAvLyBBcHAgY29tcG9uZW50cy5cbiAgICAgICAgJ2FwcC5ob21lJyxcbiAgICAgICAgJ2FwcC5hZG1pbicsXG4gICAgICAgICdhcHAucHJvZmlsZScsXG4gICAgICAgICdhcHAuc2lnblVwJyxcblxuICAgICAgICAvLyBBcHAgc2hhcmVkLlxuICAgICAgICAnYXBwLnByb3ZpZGVycycsXG4gICAgICAgICdhcHAuc2VydmljZXMnLFxuICAgICAgICAnYXBwLnJlc291cmNlcydcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmFkbWluJywgW1xuXG4gICAgXSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmhvbWUnLCBbXG5cbiAgICBdKTtcblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2lnblVwJywgW1xuXG4gICAgXSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnByb2ZpbGUnLCBbXG5cbiAgICBdKTtcblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucHJvdmlkZXJzJywgW10pO1xuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5yZXNvdXJjZXMnLCBbXSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnNlcnZpY2VzJywgW10pO1xuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcblxuICAgIGFwcC5jb25maWcoQ29uZmlndXJhdGlvbik7XG5cbiAgICBDb25maWd1cmF0aW9uLiRpbmplY3QgPSBbJyRsb2dQcm92aWRlcicsICckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIENvbmZpZ3VyYXRpb24oJGxvZ1Byb3ZpZGVyLCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAvLyBMb2dnaW5nLlxuICAgICAgICAkbG9nUHJvdmlkZXIuZGVidWdFbmFibGVkKHRydWUpO1xuXG4gICAgICAgIC8vIEhUTUw1IG1vZGUuXG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFsd2F5cyBkZWZhdWx0IHRvIGhvbWUgcGFnZS5cbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2FwcC9ob21lJyk7XG5cbiAgICAgICAgLy8gUm91dGVzLlxuICAgICAgICB2YXIgZGVmYXVsdEN0cmxBcyA9ICd2bSc7XG4gICAgICAgIHZhciBtYWluVmlld3NPYmogPSB7XG4gICAgICAgICAgICBuYXY6IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9sYXlvdXQvbmF2VG1wbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05hdkN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogZGVmYXVsdEN0cmxBc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvbGF5b3V0L2NvbnRlbnRUbXBsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGVudEN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogZGVmYXVsdEN0cmxBc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNpZGViYXI6IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9sYXlvdXQvc2lkZWJhclRtcGwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTaWRlYmFyQ3RybCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiBkZWZhdWx0Q3RybEFzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9vdGVyOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvbGF5b3V0L2Zvb3RlclRtcGwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdGb290ZXJDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6IGRlZmF1bHRDdHJsQXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdhcHAnLCB7XG4gICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwcCcsXG4gICAgICAgICAgICAgICAgdmlld3M6IG1haW5WaWV3c09ialxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGV4dHJhIHByb3BlcnRpZXMgdG8gZWFjaCBzdGF0ZS5cbiAgICBhcHAucnVuKFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50KSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLnRpdGxlID0gY3VycmVudC50aXRsZTtcbiAgICAgICAgICAgICRyb290U2NvcGUuYm9keUNzcyA9IGN1cnJlbnQuYm9keUNzcztcbiAgICAgICAgfSk7XG4gICAgfV0pO1xuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFwcEFkbWluID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5hZG1pbicpO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gQ29uZmlnLlxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGFwcEFkbWluLmNvbmZpZyhDb25maWd1cmF0aW9uKTtcblxuICAgIENvbmZpZ3VyYXRpb24uJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIENvbmZpZ3VyYXRpb24oJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgdmFyIHJvdXRlUm9sZUNoZWNrcyA9IHtcbiAgICAgICAgICAgIGFkbWluOiB7XG4gICAgICAgICAgICAgICAgYXV0aDogZnVuY3Rpb24gKGF1dGhTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdhZG1pbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdhcHAudXNlckxpc3QnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3VzZXItbGlzdCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvY29tcG9uZW50cy9hZG1pbi91c2VyTGlzdFZpZXcnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyTGlzdEN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlOiByb3V0ZVJvbGVDaGVja3MuYWRtaW4sXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdVc2VyIExpc3QnLFxuICAgICAgICAgICAgICAgIGJvZHlDc3M6ICd1c2VyLWxpc3QnXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBSdW4uXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgYXBwQWRtaW4ucnVuKFJ1bik7XG5cbiAgICBSdW4uJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckc3RhdGUnXTtcblxuICAgIGZ1bmN0aW9uIFJ1bigkcm9vdFNjb3BlLCAkc3RhdGUpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yLm5vdEF1dGhvcml6ZWQpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2FwcC5ob21lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmhvbWUnKS5jb25maWcoQ29uZmlndXJhdGlvbik7XG5cbiAgICBDb25maWd1cmF0aW9uLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBDb25maWd1cmF0aW9uKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2FwcC5ob21lJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9ob21lJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9jb21wb25lbnRzL2hvbWUvaG9tZVZpZXcnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnSG9tZScsXG4gICAgICAgICAgICAgICAgYm9keUNzczogJ2hvbWUnXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYXBwU2lnblVwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5zaWduVXAnKTtcblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIENvbmZpZy5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBhcHBTaWduVXAuY29uZmlnKENvbmZpZ3VyYXRpb24pO1xuXG4gICAgQ29uZmlndXJhdGlvbi4kaW5qZWN0ID0gWyckc3RhdGVQcm92aWRlciddO1xuXG4gICAgZnVuY3Rpb24gQ29uZmlndXJhdGlvbigkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdhcHAuc2lnblVwJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9zaWduLXVwJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9jb21wb25lbnRzL3NpZ25VcC9zaWduVXBWaWV3JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU2lnblVwQ3RybCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnU2lnbiBVcCcsXG4gICAgICAgICAgICAgICAgYm9keUNzczogJ3NpZ24tdXAnXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnByb2ZpbGUnKS5jb25maWcoQ29uZmlndXJhdGlvbik7XG5cbiAgICBDb25maWd1cmF0aW9uLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBDb25maWd1cmF0aW9uKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgIHZhciByb3V0ZVJvbGVDaGVja3MgPSB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgYXV0aDogZnVuY3Rpb24gKGF1dGhTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVBdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2FwcC5wcm9maWxlJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9jb21wb25lbnRzL3Byb2ZpbGUvcHJvZmlsZVZpZXcnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9maWxlQ3RybCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHJvdXRlUm9sZUNoZWNrcy51c2VyLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnUHJvZmlsZScsXG4gICAgICAgICAgICAgICAgYm9keUNzczogJ3Byb2ZpbGUnXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnByb3ZpZGVycycpLmNvbmZpZyhDb25maWd1cmF0aW9uKTtcblxuICAgIENvbmZpZ3VyYXRpb24uJGluamVjdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gQ29uZmlndXJhdGlvbigpIHtcblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucmVzb3VyY2VzJykuY29uZmlnKENvbmZpZ3VyYXRpb24pO1xuXG4gICAgQ29uZmlndXJhdGlvbi4kaW5qZWN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBDb25maWd1cmF0aW9uKCkge1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLmNvbmZpZyhDb25maWd1cmF0aW9uKTtcblxuICAgIENvbmZpZ3VyYXRpb24uJGluamVjdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gQ29uZmlndXJhdGlvbigpIHtcblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDb250ZW50Q3RybCcsIENvbnRlbnRDdHJsKTtcblxuICAgIENvbnRlbnRDdHJsLiRpbmplY3QgPSBbJ2xvZ2dlciddO1xuXG4gICAgZnVuY3Rpb24gQ29udGVudEN0cmwobG9nZ2VyKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgaW5pdCgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoQ29udGVudEN0cmwsIGluaXQsICdJbml0aWFsaXppbmcuLi4nKTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdGb290ZXJDdHJsJywgRm9vdGVyQ3RybCk7XG5cbiAgICBGb290ZXJDdHJsLiRpbmplY3QgPSBbJ2xvZ2dlciddO1xuXG4gICAgZnVuY3Rpb24gRm9vdGVyQ3RybChsb2dnZXIpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBpbml0KCk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhGb290ZXJDdHJsLCBpbml0LCAnSW5pdGlhbGl6aW5nLi4uJyk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignTmF2Q3RybCcsIE5hdkN0cmwpO1xuXG4gICAgTmF2Q3RybC4kaW5qZWN0ID0gWydsb2dnZXInLCAnJGh0dHAnLCAnJHN0YXRlJywgJ25vdGlmaWNhdGlvblByb3ZpZGVyJywgJ2lkZW50aXR5U2VydmljZScsICdhdXRoU2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gTmF2Q3RybChsb2dnZXIsICRodHRwLCAkc3RhdGUsIG5vdGlmaWNhdGlvblByb3ZpZGVyLCBpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gRXhwb3NlIGZ1bmN0aW9ucy5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgdm0ubG9nSW4gPSBsb2dJbjtcbiAgICAgICAgdm0ubG9nT3V0ID0gbG9nT3V0O1xuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEluaXRpYWxpemF0aW9uLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBpbml0KCk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhOYXZDdHJsLCBpbml0LCAnSW5pdGlhbGl6aW5nLi4uJyk7XG4gICAgICAgICAgICB2bS5pZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEV4cG9zZWQgZnVuY3Rpb25zIGltcGxlbWVudGF0aW9uLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBmdW5jdGlvbiBsb2dJbigpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhOYXZDdHJsLCBsb2dJbiwgJ1NpZ25pbmcgaW4uLi4nKTtcblxuICAgICAgICAgICAgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVXNlcih2bS51c2VybmFtZSwgdm0ucGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblByb3ZpZGVyLnN1Y2Nlc3MoJ1lvdSBoYXZlIHN1Y2Nlc3NmdWxseSBsb2dnZWQgaW4uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25Qcm92aWRlci5lcnJvcignSW52YWxpZCB1c2VyIG5hbWUgb3IgcGFzc3dvcmQhJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ091dCgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhOYXZDdHJsLCBsb2dPdXQsICdTaWduaW5nIGluLi4uJyk7XG5cbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ091dFVzZXIoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdm0udXNlcm5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdm0ucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uUHJvdmlkZXIuaW5mbygnWW91IGhhdmUgYmVlbiBsb2dnZWQgb3V0LicpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2FwcC5ob21lJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignU2lkZWJhckN0cmwnLCBTaWRlYmFyQ3RybCk7XG5cbiAgICBTaWRlYmFyQ3RybC4kaW5qZWN0ID0gWydsb2dnZXInXTtcblxuICAgIGZ1bmN0aW9uIFNpZGViYXJDdHJsKGxvZ2dlcikge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIGluaXQoKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFNpZGViYXJDdHJsLCBpbml0LCAnSW5pdGlhbGl6aW5nLi4uJyk7XG4gICAgICAgICAgICB2bS50ZXN0ID0gJ1Rlc3QgUmVjaXBlJztcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuYWRtaW4nKS5jb250cm9sbGVyKCdVc2VyTGlzdEN0cmwnLCBVc2VyTGlzdEN0cmwpO1xuXG4gICAgVXNlckxpc3RDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdsb2dnZXInLCAnVXNlclJlc291cmNlJ107XG5cbiAgICBmdW5jdGlvbiBVc2VyTGlzdEN0cmwoJHNjb3BlLCBsb2dnZXIsIFVzZXJSZXNvdXJjZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIGluaXQoKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFVzZXJMaXN0Q3RybCwgaW5pdCwgJ0luaXRpYWxpemluZy4uLicpO1xuICAgICAgICAgICAgdm0udXNlcnMgPSBVc2VyUmVzb3VyY2UucXVlcnkoKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmhvbWUnKS5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcblxuICAgIEhvbWVDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdsb2dnZXInXTtcblxuICAgIGZ1bmN0aW9uIEhvbWVDdHJsKCRzY29wZSwgbG9nZ2VyKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgaW5pdCgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoSG9tZUN0cmwsIGluaXQsICdJbml0aWFsaXppbmcuLi4nKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnNpZ25VcCcpLmNvbnRyb2xsZXIoJ1NpZ25VcEN0cmwnLCBTaWduVXBDdHJsKTtcblxuICAgIFNpZ25VcEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJyRzdGF0ZScsICdsb2dnZXInLCAnbm90aWZpY2F0aW9uUHJvdmlkZXInLCAndmFsaWRhdGlvbicsICdhdXRoU2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gU2lnblVwQ3RybCgkc2NvcGUsICRzdGF0ZSwgbG9nZ2VyLCBub3RpZmljYXRpb25Qcm92aWRlciwgdmFsaWRhdGlvbiwgYXV0aFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyBFeHBvc2VkIGZ1bmN0aW9ucy5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgdm0uZ2V0Q2xhc3MgPSB2YWxpZGF0aW9uLmdldENsYXNzO1xuICAgICAgICB2bS5zaWduVXAgPSBzaWduVXA7XG5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24uXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGluaXQoKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFNpZ25VcEN0cmwsIGluaXQsICdJbml0aWFsaXppbmcuLi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEV4cG9zZWQgZnVuY3Rpb25zIGltcGxlbWVudGF0aW9uLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBmdW5jdGlvbiBzaWduVXAoKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoU2lnblVwQ3RybCwgc2lnblVwLCAnU3VibWl0dGluZyBmb3JtLi4uJyk7XG4gICAgICAgICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgbmV3VXNlckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHZtLmVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB2bS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHZtLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdm0ubGFzdE5hbWVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmNyZWF0ZVVzZXIobmV3VXNlckRhdGEpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25Qcm92aWRlci5zdWNjZXNzKCdVc2VyIHN1Y2Nlc3NmdWxseSBjcmVhdGVkLicpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2FwcC5ob21lJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uUHJvdmlkZXIuZXJyb3IoZXJyb3JSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucHJvZmlsZScpLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDdHJsJywgUHJvZmlsZUN0cmwpO1xuXG4gICAgUHJvZmlsZUN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ2xvZ2dlcicsICd2YWxpZGF0aW9uJywgJ2F1dGhTZXJ2aWNlJywgJ2lkZW50aXR5U2VydmljZScsICdub3RpZmljYXRpb25Qcm92aWRlciddO1xuXG4gICAgZnVuY3Rpb24gUHJvZmlsZUN0cmwoJHNjb3BlLCBsb2dnZXIsIHZhbGlkYXRpb24sIGF1dGhTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIG5vdGlmaWNhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gRXhwb3NlZCBmdW5jdGlvbnMuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHZtLmdldENsYXNzID0gdmFsaWRhdGlvbi5nZXRDbGFzcztcbiAgICAgICAgdm0udXBkYXRlID0gdXBkYXRlO1xuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEluaXRpYWxpemF0aW9uLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBpbml0KCk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhQcm9maWxlQ3RybCwgaW5pdCwgJ0luaXRpYWxpemluZy4uLicpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdmlldy5cbiAgICAgICAgICAgIHZtLmVtYWlsID0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLnVzZXJuYW1lO1xuICAgICAgICAgICAgdm0uZmlyc3ROYW1lID0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZTtcbiAgICAgICAgICAgIHZtLmxhc3ROYW1lID0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gRXhwb3NlZCBmdW5jdGlvbnMgaW1wbGVtZW50YXRpb24uXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhQcm9maWxlQ3RybCwgdXBkYXRlLCAnVXBkYXRpbmcgdXNlciBwcm9maWxlLi4uJyk7XG4gICAgICAgICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgbmV3VXNlckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHZtLmVtYWlsLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdm0uZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB2bS5sYXN0TmFtZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHZtLnBhc3N3b3JkICYmIHZtLnBhc3N3b3JkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBuZXdVc2VyRGF0YS5wYXNzd29yZCA9IHZtLnBhc3N3b3JkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhdXRoU2VydmljZS51cGRhdGVDdXJyZW50VXNlcihuZXdVc2VyRGF0YSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblByb3ZpZGVyLnN1Y2Nlc3MoJ1lvdXIgdXNlciBwcm9maWxlIGhhcyBiZWVuIHVwZGF0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25Qcm92aWRlci5lcnJvcihyZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2bS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnByb3ZpZGVycycpLmZhY3RvcnkoJ2xvZ2dlcicsIExvZ2dlcik7XG5cbiAgICBMb2dnZXIuJGluamVjdCA9IFsnJGxvZyddO1xuXG4gICAgZnVuY3Rpb24gTG9nZ2VyKCRsb2cpIHtcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gRXhwb3NlZCBmdW5jdGlvbnMuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGZ1bmN0aW9uIGRlYnVnKGN0cmwsIGZ1bmMsIG1zZykge1xuICAgICAgICAgICAgJGxvZy5kZWJ1ZyhidWlsZE1zZyhjdHJsLCBmdW5jLCBtc2cpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGVycm9yKGN0cmwsIGZ1bmMsIG1zZykge1xuICAgICAgICAgICAgJGxvZy5lcnJvcihidWlsZE1zZyhjdHJsLCBmdW5jLCBtc2cpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluZm8oY3RybCwgZnVuYywgbXNnKSB7XG4gICAgICAgICAgICAkbG9nLmluZm8oYnVpbGRNc2coY3RybCwgZnVuYywgbXNnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2coY3RybCwgZnVuYywgbXNnKSB7XG4gICAgICAgICAgICAkbG9nLmxvZyhidWlsZE1zZyhjdHJsLCBmdW5jLCBtc2cpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHdhcm4oY3RybCwgZnVuYywgbXNnKSB7XG4gICAgICAgICAgICAkbG9nLndhcm4oYnVpbGRNc2coY3RybCwgZnVuYywgbXNnKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb25zLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBmdW5jdGlvbiBidWlsZE1zZyhjdHJsLCBmdW5jLCBtc2cpIHtcbiAgICAgICAgICAgIHJldHVybiBjdHJsLm5hbWUgKyAnIC0+ICcgKyBmdW5jLm5hbWUgKyAnKCk6ICcgKyBtc2c7XG4gICAgICAgIH1cblxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyBFeHBvc2UgZnVuY3Rpb25zLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGVidWc6IGRlYnVnLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgaW5mbzogaW5mbyxcbiAgICAgICAgICAgIGxvZzogbG9nLFxuICAgICAgICAgICAgd2Fybjogd2FyblxuICAgICAgICB9O1xuICAgIH1cblxufSkoKTsiLCJcbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wcm92aWRlcnMnKS52YWx1ZSgndG9hc3RyJywgdG9hc3RyKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnByb3ZpZGVycycpLmZhY3RvcnkoJ25vdGlmaWNhdGlvblByb3ZpZGVyJywgTm90aWZpY2F0aW9uUHJvdmlkZXIpO1xuXG4gICAgTm90aWZpY2F0aW9uUHJvdmlkZXIuJGluamVjdCA9IFsndG9hc3RyJywgJ2xvZ2dlciddO1xuXG4gICAgZnVuY3Rpb24gTm90aWZpY2F0aW9uUHJvdmlkZXIodG9hc3RyLCBsb2dnZXIpIHtcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gVG9hc3RyIG9wdGlvbnMuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlLFxuICAgICAgICAgICAgZGVidWc6IGZhbHNlLFxuICAgICAgICAgICAgbmV3ZXN0T25Ub3A6IGZhbHNlLFxuICAgICAgICAgICAgcHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICAgICAgcG9zaXRpb25DbGFzczogJ3RvYXN0LXRvcC1jZW50ZXInLFxuICAgICAgICAgICAgcHJldmVudER1cGxpY2F0ZXM6IGZhbHNlLFxuICAgICAgICAgICAgb25jbGljazogbnVsbCxcbiAgICAgICAgICAgIHNob3dEdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgaGlkZUR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgdGltZU91dDogMjAwMCxcbiAgICAgICAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMCxcbiAgICAgICAgICAgIHNob3dFYXNpbmc6ICdzd2luZycsXG4gICAgICAgICAgICBoaWRlRWFzaW5nOiAnbGluZWFyJyxcbiAgICAgICAgICAgIHNob3dNZXRob2Q6ICdmYWRlSW4nLFxuICAgICAgICAgICAgaGlkZU1ldGhvZDogJ2ZhZGVPdXQnXG4gICAgICAgIH07XG5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gUHVibGljIGZ1bmN0aW9ucy5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgZnVuY3Rpb24gc3VjY2Vzcyhtc2cpIHtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKG1zZyk7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoTm90aWZpY2F0aW9uUHJvdmlkZXIsIHN1Y2Nlc3MsIG1zZyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbmZvKG1zZykge1xuICAgICAgICAgICAgdG9hc3RyLmluZm8obXNnKTtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhOb3RpZmljYXRpb25Qcm92aWRlciwgaW5mbywgbXNnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHdhcm5pbmcobXNnKSB7XG4gICAgICAgICAgICB0b2FzdHIud2FybmluZyhtc2cpO1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKE5vdGlmaWNhdGlvblByb3ZpZGVyLCB3YXJuaW5nLCBtc2cpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXJyb3IobXNnKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IobXNnKTtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhOb3RpZmljYXRpb25Qcm92aWRlciwgZXJyb3IsIG1zZyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyBFeHBvc2UgZnVuY3Rpb25zLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgICAgICAgIGluZm86IGluZm8sXG4gICAgICAgICAgICB3YXJuaW5nOiB3YXJuaW5nLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yXG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5wcm92aWRlcnMnKS5mYWN0b3J5KCd2YWxpZGF0aW9uJywgVmFsaWRhdGlvbik7XG5cbiAgICBWYWxpZGF0aW9uLiRpbmplY3QgPSBbXTtcblxuICAgIGZ1bmN0aW9uIFZhbGlkYXRpb24oKSB7XG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEV4cG9zZWQgZnVuY3Rpb25zLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBmdW5jdGlvbiBoYXNFcnJvcihmb3JtLCBmb3JtRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm0uJHN1Ym1pdHRlZCAmJiBmb3JtRWxlbWVudC4kaW52YWxpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhc1dhcm4oZm9ybSwgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAhZm9ybS4kc3VibWl0dGVkICYmIGZvcm1FbGVtZW50LiRkaXJ0eSAmJiBmb3JtRWxlbWVudC4kaW52YWxpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhc1N1Y2Nlc3MoZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmb3JtRWxlbWVudC4kZGlydHkgJiYgIWZvcm1FbGVtZW50LiRpbnZhbGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2xhc3MoZm9ybSwgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ2hhcy1lcnJvcic6IGhhc0Vycm9yKGZvcm0sIGZvcm1FbGVtZW50KSxcbiAgICAgICAgICAgICAgICAnaGFzLXdhcm5pbmcnOiBoYXNXYXJuKGZvcm0sIGZvcm1FbGVtZW50KSxcbiAgICAgICAgICAgICAgICAnaGFzLXN1Y2Nlc3MnOiBoYXNTdWNjZXNzKGZvcm1FbGVtZW50KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEV4cG9zZSBmdW5jdGlvbnMuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoYXNFcnJvcjogaGFzRXJyb3IsXG4gICAgICAgICAgICBoYXNXYXJuOiBoYXNXYXJuLFxuICAgICAgICAgICAgaGFzU3VjY2VzczogaGFzU3VjY2VzcyxcbiAgICAgICAgICAgIGdldENsYXNzOiBnZXRDbGFzc1xuICAgICAgICB9O1xuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucmVzb3VyY2VzJykuZmFjdG9yeSgnVXNlclJlc291cmNlJywgVXNlclJlc291cmNlKTtcblxuICAgIFVzZXJSZXNvdXJjZS4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcblxuICAgIGZ1bmN0aW9uIFVzZXJSZXNvdXJjZSgkcmVzb3VyY2UpIHtcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gUmVzb3VyY2UuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHZhciBVc2VyUmVzID0gJHJlc291cmNlKCcvYXBpL3VzZXJzLzppZCcsIHtfaWQ6ICdAaWQnfSwge1xuICAgICAgICAgICAgdXBkYXRlOiB7IG1ldGhvZDogJ1BVVCcsIGlzQXJyYXk6IGZhbHNlIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgVXNlclJlcy5wcm90b3R5cGUuaXNBZG1pbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvbGVzICYmIHRoaXMucm9sZXMuaW5kZXhPZignYWRtaW4nKSA+PSAwO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBVc2VyUmVzO1xuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKS5mYWN0b3J5KCdhdXRoU2VydmljZScsIEF1dGhTZXJ2aWNlKTtcblxuICAgIEF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRxJywgJ2xvZ2dlcicsICdpZGVudGl0eVNlcnZpY2UnLCAnVXNlclJlc291cmNlJ107XG5cbiAgICBmdW5jdGlvbiBBdXRoU2VydmljZSgkaHR0cCwgJHEsIGxvZ2dlciwgaWRlbnRpdHlTZXJ2aWNlLCBVc2VyUmVzb3VyY2UpIHtcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gVmFyaWFibGVzLlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICB2YXIgbm90QXV0aG9yaXplZE9iaiA9IHsgbm90QXV0aG9yaXplZDogdHJ1ZSB9O1xuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIFB1YmxpYyBmdW5jdGlvbnMuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gbmV3IFVzZXJSZXNvdXJjZSgpO1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh1c2VyLCByZXNwb25zZS5kYXRhLnVzZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgY3VycmVudCB1c2VyLlxuICAgICAgICAgICAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSB1c2VyO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9nT3V0VXNlcigpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9sb2dvdXQnLCB7IGxvZ091dDogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVVzZXIobmV3VXNlckRhdGEpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgbmV3VXNlciA9IG5ldyBVc2VyUmVzb3VyY2UobmV3VXNlckRhdGEpO1xuXG4gICAgICAgICAgICBuZXdVc2VyLiRzYXZlKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IG5ld1VzZXI7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3JSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3JSZXNwb25zZS5kYXRhLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIobmV3VXNlckRhdGEpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIHZhciBjbG9uZSA9IGFuZ3VsYXIuY29weShpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoY2xvbmUsIG5ld1VzZXJEYXRhKTtcblxuICAgICAgICAgICAgY2xvbmUuJHVwZGF0ZSgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSBjbG9uZTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvclJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvclJlc3BvbnNlLmRhdGEucmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKHJvbGUpIHtcbiAgICAgICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKHJvbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3Qobm90QXV0aG9yaXplZE9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhdXRob3JpemVBdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCkge1xuICAgICAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KG5vdEF1dGhvcml6ZWRPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gRXhwb3NlIGZ1bmN0aW9ucy5cbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXI6IGF1dGhlbnRpY2F0ZVVzZXIsXG4gICAgICAgICAgICBsb2dPdXRVc2VyOiBsb2dPdXRVc2VyLFxuICAgICAgICAgICAgY3JlYXRlVXNlcjogY3JlYXRlVXNlcixcbiAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRVc2VyOiB1cGRhdGVDdXJyZW50VXNlcixcbiAgICAgICAgICAgIGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGU6IGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUsXG4gICAgICAgICAgICBhdXRob3JpemVBdXRoZW50aWNhdGVkVXNlckZvclJvdXRlOiBhdXRob3JpemVBdXRoZW50aWNhdGVkVXNlckZvclJvdXRlXG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLmZhY3RvcnkoJ2lkZW50aXR5U2VydmljZScsIElkZW50aXR5U2VydmljZSk7XG5cbiAgICBJZGVudGl0eVNlcnZpY2UuJGluamVjdCA9IFsnJHdpbmRvdycsICdsb2dnZXInLCAnVXNlclJlc291cmNlJ107XG5cbiAgICBmdW5jdGlvbiBJZGVudGl0eVNlcnZpY2UoJHdpbmRvdywgbG9nZ2VyLCBVc2VyUmVzb3VyY2UpIHtcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gSGFuZGxlIGJvb3RzdHJhcHBlZCBjdXJyZW50IHVzZXIgb2JqZWN0LlxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICB2YXIgY3VycmVudFVzZXIgPSBudWxsO1xuXG4gICAgICAgIGlmICghISR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdCkge1xuICAgICAgICAgICAgY3VycmVudFVzZXIgPSBuZXcgVXNlclJlc291cmNlKCk7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjdXJyZW50VXNlciwgJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIFB1YmxpYyBmdW5jdGlvbnMuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXI7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQocm9sZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnJvbGVzLmluZGV4T2Yocm9sZSkgPj0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEV4cG9zZSBmdW5jdGlvbnMuXG4gICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgICAgICAgIGlzQXV0aG9yaXplZDogaXNBdXRob3JpemVkXG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==